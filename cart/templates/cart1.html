{%load static%}
<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>购物车</title>

<link rel="stylesheet" href="{% static 'css/carts.css'%}">
<link rel="stylesheet" href="{% static 'css/reset.css'%}">
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/carts.js' %}"></script>
</head>
<body>
<div class="logo_search">
	<div class="logo">
		<p><a href="{%url 'index'%}">佩琪网上书城</a></p>
	</div>
	<div class="topnav">
		<a href="{%url 'index'%}">首页</a>
	</div>
</div>
<section class="cartMain">
	<div class="cartMain_hd">
		<ul class="order_lists cartTop">
			<li class="list_chk">
				<!--所有商品全选-->
				<input type="checkbox" id="all" class="whole_check">
				<label for="all"></label>
				全选
			</li>
			<li class="list_con">商品信息</li>
			<li class="list_price">单价</li>
			<li class="list_amount">数量</li>
			<li class="list_sum">金额</li>
			<li class="list_op">操作</li>
		</ul>
	</div>

	<div class="cartBox" id="cartBox">
		<div class="order_content" id="order_content">
		<!--
			<ul class="order_lists">
				<li class="list_chk">
					<input type="checkbox" id="checkbox_2" class="son_check">
					<label for="checkbox_2"></label>
				</li>
				<li class="list_con">
					<div class="list_img"><a href="javascript:;"><img src="{% static 'images/1.jpg' %}" alt=""></a></div>
					<div class="list_text"><a href="javascript:;">围城</a></div>
				</li>
				<li class="list_price">
					<p class="price">￥30</p>
				</li>
				<li class="list_amount">
					<div class="amount_box">
						<a href="javascript:;" class="reduce reSty">-</a>
						<input type="text" value="1" class="sum">
						<a href="javascript:;" class="plus">+</a>
					</div>
				</li>
				<li class="list_sum">
					<p class="sum_price">￥30</p>
				</li>
				<li class="list_op">
					<p class="del"><a href="javascript:;" class="delBtn">移除商品</a></p>
				</li>
			</ul>
			<ul class="order_lists">
				<li class="list_chk">
					<input type="checkbox" id="checkbox_3" class="son_check">
					<label for="checkbox_3"></label>
				</li>
				<li class="list_con">
					<div class="list_img"><a href="javascript:;"><img src="{% static 'images/2.jpg' %}" alt=""></a></div>
					<div class="list_text"><a href="javascript:;">三体	三体：全三册 刘慈欣代表作，亚洲首部“雨果奖”获奖作品！</a></div>
				</li>
				<li class="list_price">
					<p class="price">￥90.5</p>
				</li>
				<li class="list_amount">
					<div class="amount_box">
						<a href="javascript:;" class="reduce reSty">-</a>
						<input type="text" value="1" class="sum">
						<a href="javascript:;" class="plus">+</a>
					</div>
				</li>
				<li class="list_sum">
					<p class="sum_price">￥90.5</p>
				</li>
				<li class="list_op">
					<p class="del"><a href="javascript:;" class="delBtn">移除商品</a></p>
				</li>
			</ul>
			<ul class="order_lists">
				<li class="list_chk">
					<input type="checkbox" id="checkbox_6" class="son_check">
					<label for="checkbox_6"></label>
				</li>
				<li class="list_con">
					<div class="list_img"><a href="javascript:;"><img src="{% static 'images/3.jpg' %}" alt=""></a></div>
					<div class="list_text"><a href="javascript:;">百年孤独</a></div>
				</li>
				<li class="list_price">
					<p class="price">￥28.5</p>
				</li>
				<li class="list_amount">
					<div class="amount_box">
						<a href="javascript:;" class="reduce reSty">-</a>
						<input type="text" value="1" class="sum">
						<a href="javascript:;" class="plus">+</a>
					</div>
				</li>
				<li class="list_sum">
					<p class="sum_price">￥28.5</p>
				</li>
				<li class="list_op">
					<p class="del"><a href="javascript:;" class="delBtn">移除商品</a></p>
				</li>
			</ul>
			-->
{% for book in bookList %}
			<ul class="order_lists"  id="{{book.bookID}}">
				<li class="list_chk">
					<input type="checkbox" id="checkbox_{{book.dID}}" class="son_check" autocomplete="off">
					<label for="checkbox_{{book.dID}}"></label>
				</li>
				<li class="list_con">
					<div class="list_img"><a href="/book/{{book.bookID}}"><img src="{% static ''%}/{{book.bookImg}}" alt=""></a></div>
					<div class="list_text"><a href="/book/{{book.bookID}}">{{book.bookName}}</a></div>
				</li>
				<li class="list_price">
					<p class="price">￥{{book.bookPrice}}</p>
				</li>
				<li class="list_amount">
					<div class="amount_box">
						<a href="javascript:;" class="reduce reSty">-</a>
						<input type="text" value="{{book.amount}}" class="sum"  id="{{book.bookID}}">
						<a href="javascript:;" class="plus">+</a>
					</div>
				</li>
				<li class="list_sum">
					<p class="sum_price">￥{{book.price}}</p>
				</li>
				<li class="list_op">
					<p class="del"><a href="javascript:;" class="delBtn">移除商品</a></p>
				</li>
			</ul>
{% endfor %}
<script type="text/javascript">
    //列表
    /*var bookList = {{ bookJson|safe }}
    for (var i = bookList.length - 1; i >= 0; i--) {
        // 鼠标右键，审核元素，选择 console 可以看到输入的值。
        console.log(bookList[i]);
    };*/
    // console.log('--- 同时遍历索引和内容，使用 jQuery.each() 方法 ---')
    // $.each(bookList, function(index, item){
    //     console.log(index);
    //     console.log(item);
    // });
</script>
		</div>
	</div>
	<!--底部-->
	<div class="bar-wrapper">
		<div class="bar-right">
			<div class="piece">已选商品<strong class="piece_num">0</strong>件</div>
			<div class="totalMoney">共计: <strong class="total_text">0.00</strong></div>
			<div class="calBtn"><a href="javascript:;">结算</a></div>
		</div>
	</div>
</section>
<section class="model_bg"></section>
<section class="my_model">
	<p class="title">删除宝贝<span class="closeModel">X</span></p>
	<p>您确认要删除该宝贝吗？</p>
	<div class="opBtn"><a href="javascript:;" class="dialog-sure">确定</a><a href="javascript:;" class="dialog-close">关闭</a></div>
</section>
<script type="text/javascript">
/*django中ajax关闭跨站点请求攻击*/
$.ajaxSetup({
    data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
});
// $.ajaxSetup({
//   beforeSend: function(xhr, settings){ 
//       var csrftoken = '{{ csrf_token }}';
//       xhr.setRequestHeader("X-CSRFToken", csrftoken); 
//   }
// });
</script>
</body>
</html>
